{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport AuthContext from './AuthContext';\nconst ProfileHook = () => {\n  _s();\n  const {\n    authTokens,\n    logoutUser\n  } = useContext(AuthContext);\n  const [profile, setProfile] = useState(null);\n  const [profileLoaded, setProfileLoaded] = useState(false);\n  useEffect(() => {\n    const getProfile = async () => {\n      try {\n        let response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/profile/`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + String(authTokens.access)\n          }\n        });\n        if (response.status === 200) {\n          let data = await response.json();\n          setProfile(data);\n        } else if (response.status === 401) {\n          logoutUser();\n        }\n        setProfileLoaded(true); // Indicates the profile fetch attempt was made\n      } catch (error) {\n        console.error(\"An error occurred while fetching the profile:\", error);\n        setProfileLoaded(true);\n      }\n    };\n    if (authTokens) {\n      getProfile();\n    }\n  }, [authTokens, logoutUser]);\n  return {\n    profile,\n    profileLoaded\n  };\n};\n_s(ProfileHook, \"26cMkpQlvy1mbxce+ek455NzDHc=\");\n_c = ProfileHook;\nexport default ProfileHook;\nvar _c;\n$RefreshReg$(_c, \"ProfileHook\");","map":{"version":3,"names":["useState","useEffect","useContext","AuthContext","ProfileHook","_s","authTokens","logoutUser","profile","setProfile","profileLoaded","setProfileLoaded","getProfile","response","fetch","process","env","REACT_APP_API_BASE_URL","method","headers","String","access","status","data","json","error","console","_c","$RefreshReg$"],"sources":["/Users/anhvu/Desktop/COSC4353/group_project/fuel_rate_calc/src/context/ProfileHook.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport AuthContext from './AuthContext';\n\nconst ProfileHook = () => {\n    const { authTokens, logoutUser } = useContext(AuthContext);\n    const [profile, setProfile] = useState(null);\n    const [profileLoaded, setProfileLoaded] = useState(false);\n\n    useEffect(() => {\n        const getProfile = async () => {\n            try {\n                let response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/profile/`, {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': 'Bearer ' + String(authTokens.access),\n                    },\n                });\n\n                if (response.status === 200) {\n                    let data = await response.json();\n                    setProfile(data);\n                } else if (response.status === 401) {\n                    logoutUser();\n                }\n                setProfileLoaded(true); // Indicates the profile fetch attempt was made\n            } catch (error) {\n                console.error(\"An error occurred while fetching the profile:\", error);\n                setProfileLoaded(true);\n            }\n        };\n\n        if (authTokens) {\n            getProfile();\n        }\n    }, [authTokens, logoutUser]);\n\n    return { profile, profileLoaded };\n};\n\nexport default ProfileHook;\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AACvD,OAAOC,WAAW,MAAM,eAAe;AAEvC,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAM;IAAEC,UAAU;IAAEC;EAAW,CAAC,GAAGL,UAAU,CAACC,WAAW,CAAC;EAC1D,MAAM,CAACK,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACU,aAAa,EAAEC,gBAAgB,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAEzDC,SAAS,CAAC,MAAM;IACZ,MAAMW,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACA,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,sBAAuB,WAAU,EAAE;UACzEC,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACL,cAAc,EAAE,kBAAkB;YAClC,eAAe,EAAE,SAAS,GAAGC,MAAM,CAACd,UAAU,CAACe,MAAM;UACzD;QACJ,CAAC,CAAC;QAEF,IAAIR,QAAQ,CAACS,MAAM,KAAK,GAAG,EAAE;UACzB,IAAIC,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;UAChCf,UAAU,CAACc,IAAI,CAAC;QACpB,CAAC,MAAM,IAAIV,QAAQ,CAACS,MAAM,KAAK,GAAG,EAAE;UAChCf,UAAU,CAAC,CAAC;QAChB;QACAI,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;MAC5B,CAAC,CAAC,OAAOc,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,+CAA+C,EAAEA,KAAK,CAAC;QACrEd,gBAAgB,CAAC,IAAI,CAAC;MAC1B;IACJ,CAAC;IAED,IAAIL,UAAU,EAAE;MACZM,UAAU,CAAC,CAAC;IAChB;EACJ,CAAC,EAAE,CAACN,UAAU,EAAEC,UAAU,CAAC,CAAC;EAE5B,OAAO;IAAEC,OAAO;IAAEE;EAAc,CAAC;AACrC,CAAC;AAACL,EAAA,CAnCID,WAAW;AAAAuB,EAAA,GAAXvB,WAAW;AAqCjB,eAAeA,WAAW;AAAC,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}